dependsOn:
  - tera-ui-components
  - tera-ui-i18n
  - tera-util-api-sdk
  - tera-util-composables
  - tera-util-events
  - typescript-util-zitadel
  - ui-css
  - vue-i18n-util-composables
  - vue-i18n-util-configs
  - vue-ui-components-app
  - vue-ui-components-core
  - vue-ui-components-extra
  - vue-ui-layouts
  - vue-util-composables

env:
  DEV_DOMAIN: app.tera.lychen.local
  DEV_VITE_API_URL: https://api.tera.lychen.local
  DEV_VITE_ZITADEL_CLIENT_ID: '313620143924117951'
  DEV_VITE_ZITADEL_ISSUER: https://dev.account.lychen.fr
  DEV_VITE_ZITADEL_PROJECT_RESOURCE_ID: '313620143924052415'
  PRODUCTION_DOCKER_IMAGE: lychen/production/tera/app
  PRODUCTION_DOKPLOY_COMPOSE_ID: ''
  PRODUCTION_DOMAIN: app.tera.lychen.fr
  PRODUCTION_VITE_API_URL: https://api.tera.lychen.fr
  PRODUCTION_VITE_ZITADEL_CLIENT_ID: ''
  PRODUCTION_VITE_ZITADEL_ISSUER: https://account.lychen.fr
  PRODUCTION_VITE_ZITADEL_PROJECT_RESOURCE_ID: ''
  STAGING_DOCKER_IMAGE: lychen/staging/tera/app
  STAGING_DOKPLOY_COMPOSE_ID: f0fzklLF69wpejz9f89ir
  STAGING_DOMAIN: staging.app.tera.lychen.fr
  STAGING_VITE_API_URL: https://staging.api.tera.lychen.fr
  STAGING_VITE_ZITADEL_CLIENT_ID: '313626987518296559'
  STAGING_VITE_ZITADEL_ISSUER: https://staging.account.lychen.fr
  STAGING_VITE_ZITADEL_PROJECT_RESOURCE_ID: '313626987518231023'

id: tera-app

language: typescript

tags:
  - vue
  - dokploy
  - pwa

tasks:
  dev:
    deps:
      - tera-util-api-sdk:generate-api
    env:
      VITE_API_URL: ${DEV_VITE_API_URL}
      VITE_ZITADEL_CLIENT_ID: ${DEV_VITE_ZITADEL_CLIENT_ID}
      VITE_ZITADEL_ISSUER: ${DEV_VITE_ZITADEL_ISSUER}
      VITE_ZITADEL_PROJECT_RESOURCE_ID: ${DEV_VITE_ZITADEL_PROJECT_RESOURCE_ID}

  production-build:
    env:
      VITE_API_URL: ${PRODUCTION_VITE_API_URL}
      VITE_ZITADEL_CLIENT_ID: ${PRODUCTION_VITE_ZITADEL_CLIENT_ID}
      VITE_ZITADEL_ISSUER: ${PRODUCTION_VITE_ZITADEL_ISSUER}
      VITE_ZITADEL_PROJECT_RESOURCE_ID: ${PRODUCTION_VITE_ZITADEL_PROJECT_RESOURCE_ID}

  staging-build:
    env:
      VITE_API_URL: ${STAGING_VITE_API_URL}
      VITE_ZITADEL_CLIENT_ID: ${STAGING_VITE_ZITADEL_CLIENT_ID}
      VITE_ZITADEL_ISSUER: ${STAGING_VITE_ZITADEL_ISSUER}
      VITE_ZITADEL_PROJECT_RESOURCE_ID: ${STAGING_VITE_ZITADEL_PROJECT_RESOURCE_ID}

type: application
