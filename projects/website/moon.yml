dependsOn:
  - ui-components
  - ui-css
  - ui-i18n
  - ui-layouts
  - vue-util-i18n

env:
  DOKPLOY_APP_ID: 'lychen-prod-website-489ff6'

id: website

language: typescript

project:
  description: 'Presentation site for Lychen ecosystem.'
  metadata:
    url: lychen.fr
  name: 'Lychen website'

tasks:
  docker-build:
    command: docker build . -t alpsify/lychen-website:latest
    deps:
      - build
    local: true
    platform: system

  docker-push:
    command: docker push alpsify/lychen-website:latest
    deps:
      - docker-build
    local: true
    platform: system

  dokploy-deploy:
    command: 'curl -X ''POST'' ''${DOKPLOY_DEPLOY_ENDPOINT}'' -H ''accept: application/json'' -H ''Content-Type: application/json'' -H ''Authorization: Bearer ${DOKPLOY_API_TOKEN}'' -d ''{ "applicationId": "${DOKPLOY_APP_ID}"}'''
    platform: system

type: application
